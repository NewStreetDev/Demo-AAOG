import type {
  ProcessingBatch,
  ProcessingLine,
  QualityControl,
  ProcesamientoDashboardStats,
  ProcesamientoProductionData,
  ProductionByType,
  ProcesamientoTask,
  BatchSummary,
} from '../../types/procesamiento.types';

const delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));

// Processing Batches
export const getMockProcessingBatches = async (): Promise<ProcessingBatch[]> => {
  await delay(300);
  return [
    {
      id: '1',
      batchCode: 'PROC-2026-001',
      inputProductName: 'Tomate Roma',
      inputProductType: 'tomate',
      sourceModule: 'agro',
      sourceLocation: 'Lote Norte',
      inputQuantity: 450,
      inputUnit: 'kg',
      outputQuantity: 200,
      outputUnit: 'kg',
      yieldPercentage: 44.4,
      status: 'in_progress',
      processingLineId: '1',
      processingLineName: 'Línea Agrícola',
      startDate: new Date('2026-01-20T08:00:00'),
      expectedEndDate: new Date('2026-01-21T16:00:00'),
      operator: 'Juan Pérez',
      supervisor: 'María García',
      temperature: 85,
      outputProductName: 'Salsa de Tomate',
      storageLocation: 'Bodega Fría A',
      createdAt: new Date('2026-01-20'),
      updatedAt: new Date('2026-01-21'),
    },
    {
      id: '2',
      batchCode: 'PROC-2026-002',
      inputProductName: 'Leche Fresca',
      inputProductType: 'leche',
      sourceModule: 'pecuario',
      sourceLocation: 'Potrero Central',
      inputQuantity: 500,
      inputUnit: 'L',
      outputQuantity: 48,
      outputUnit: 'kg',
      yieldPercentage: 9.6,
      status: 'completed',
      processingLineId: '2',
      processingLineName: 'Línea Lácteos',
      startDate: new Date('2026-01-18T06:00:00'),
      expectedEndDate: new Date('2026-01-19T18:00:00'),
      actualEndDate: new Date('2026-01-19T16:30:00'),
      operator: 'Carlos Rodríguez',
      outputProductName: 'Queso Fresco',
      outputGrade: 'A',
      storageLocation: 'Cámara Fría B',
      createdAt: new Date('2026-01-18'),
      updatedAt: new Date('2026-01-19'),
    },
    {
      id: '3',
      batchCode: 'PROC-2026-003',
      inputProductName: 'Miel Pura',
      inputProductType: 'miel',
      sourceModule: 'apicultura',
      sourceLocation: 'Apiario Principal',
      inputQuantity: 80,
      inputUnit: 'kg',
      outputQuantity: 78,
      outputUnit: 'kg',
      yieldPercentage: 97.5,
      status: 'quality_control',
      processingLineId: '3',
      processingLineName: 'Línea Apícola',
      startDate: new Date('2026-01-19T09:00:00'),
      expectedEndDate: new Date('2026-01-20T12:00:00'),
      operator: 'Ana López',
      outputProductName: 'Miel Envasada',
      createdAt: new Date('2026-01-19'),
      updatedAt: new Date('2026-01-20'),
    },
    {
      id: '4',
      batchCode: 'PROC-2026-004',
      inputProductName: 'Chile Jalapeño',
      inputProductType: 'chile',
      sourceModule: 'agro',
      sourceLocation: 'Lote Sur',
      inputQuantity: 120,
      inputUnit: 'kg',
      status: 'pending',
      processingLineId: '1',
      processingLineName: 'Línea Agrícola',
      startDate: new Date('2026-01-22T08:00:00'),
      expectedEndDate: new Date('2026-01-22T18:00:00'),
      outputProductName: 'Salsa Picante',
      createdAt: new Date('2026-01-21'),
      updatedAt: new Date('2026-01-21'),
    },
    {
      id: '5',
      batchCode: 'PROC-2026-005',
      inputProductName: 'Pepino',
      inputProductType: 'pepino',
      sourceModule: 'agro',
      inputQuantity: 200,
      inputUnit: 'kg',
      outputQuantity: 180,
      outputUnit: 'kg',
      yieldPercentage: 90,
      status: 'completed',
      processingLineId: '1',
      processingLineName: 'Línea Agrícola',
      startDate: new Date('2026-01-15T07:00:00'),
      expectedEndDate: new Date('2026-01-16T15:00:00'),
      actualEndDate: new Date('2026-01-16T14:00:00'),
      operator: 'Pedro Mora',
      outputProductName: 'Encurtido de Pepino',
      outputGrade: 'A',
      createdAt: new Date('2026-01-15'),
      updatedAt: new Date('2026-01-16'),
    },
  ];
};

// Processing Lines
export const getMockProcessingLines = async (): Promise<ProcessingLine[]> => {
  await delay(300);
  return [
    {
      id: '1',
      lineCode: 'LINEA-001',
      name: 'Línea Agrícola',
      description: 'Procesamiento de productos agrícolas',
      productTypes: ['tomate', 'chile', 'pepino'],
      status: 'active',
      capacity: 500,
      capacityUnit: 'kg/día',
      location: 'Planta Principal - Sección A',
      lastMaintenance: new Date('2026-01-10'),
      nextScheduledMaintenance: new Date('2026-02-10'),
      operator: 'Juan Pérez',
      currentBatchId: '1',
      currentBatchCode: 'PROC-2026-001',
      utilizationPercentage: 72,
      createdAt: new Date('2025-01-01'),
      updatedAt: new Date('2026-01-20'),
    },
    {
      id: '2',
      lineCode: 'LINEA-002',
      name: 'Línea Lácteos',
      description: 'Procesamiento de productos lácteos',
      productTypes: ['leche'],
      status: 'idle',
      capacity: 600,
      capacityUnit: 'L/día',
      location: 'Planta Principal - Sección B',
      lastMaintenance: new Date('2026-01-05'),
      nextScheduledMaintenance: new Date('2026-02-05'),
      utilizationPercentage: 0,
      createdAt: new Date('2025-01-01'),
      updatedAt: new Date('2026-01-19'),
    },
    {
      id: '3',
      lineCode: 'LINEA-003',
      name: 'Línea Apícola',
      description: 'Procesamiento de productos apícolas',
      productTypes: ['miel', 'cera', 'polen'],
      status: 'active',
      capacity: 150,
      capacityUnit: 'kg/día',
      location: 'Planta Principal - Sección C',
      lastMaintenance: new Date('2026-01-12'),
      nextScheduledMaintenance: new Date('2026-02-12'),
      operator: 'Ana López',
      currentBatchId: '3',
      currentBatchCode: 'PROC-2026-003',
      utilizationPercentage: 53,
      createdAt: new Date('2025-01-01'),
      updatedAt: new Date('2026-01-20'),
    },
    {
      id: '4',
      lineCode: 'LINEA-004',
      name: 'Línea Carnes',
      description: 'Procesamiento de productos cárnicos',
      productTypes: ['carne'],
      status: 'maintenance',
      capacity: 300,
      capacityUnit: 'kg/día',
      location: 'Planta Principal - Sección D',
      lastMaintenance: new Date('2025-12-15'),
      nextScheduledMaintenance: new Date('2026-01-25'),
      utilizationPercentage: 0,
      notes: 'En mantenimiento programado',
      createdAt: new Date('2025-01-01'),
      updatedAt: new Date('2026-01-21'),
    },
  ];
};

// Quality Controls
export const getMockQualityControls = async (): Promise<QualityControl[]> => {
  await delay(300);
  return [
    {
      id: '1',
      batchId: '2',
      batchCode: 'PROC-2026-002',
      inspectionDate: new Date('2026-01-19T17:00:00'),
      inspector: 'María García',
      overallResult: 'pass',
      finalGrade: 'A',
      approved: true,
      approvedBy: 'Dr. López',
      notes: 'Excelente calidad, sin defectos',
      createdAt: new Date('2026-01-19'),
      updatedAt: new Date('2026-01-19'),
    },
    {
      id: '2',
      batchId: '5',
      batchCode: 'PROC-2026-005',
      inspectionDate: new Date('2026-01-16T15:00:00'),
      inspector: 'María García',
      overallResult: 'pass',
      finalGrade: 'A',
      approved: true,
      approvedBy: 'Dr. López',
      createdAt: new Date('2026-01-16'),
      updatedAt: new Date('2026-01-16'),
    },
    {
      id: '3',
      batchId: '3',
      batchCode: 'PROC-2026-003',
      inspectionDate: new Date('2026-01-20T14:00:00'),
      inspector: 'Carlos Mendoza',
      overallResult: 'pass',
      finalGrade: 'A',
      approved: false,
      notes: 'Pendiente aprobación final',
      createdAt: new Date('2026-01-20'),
      updatedAt: new Date('2026-01-20'),
    },
  ];
};

// Dashboard Stats
export const getMockProcesamientoStats = async (): Promise<ProcesamientoDashboardStats> => {
  await delay(300);
  return {
    activeBatches: 2,
    completedBatchesToday: 1,
    totalBatchesThisMonth: 12,
    totalProcessed: 1850,
    processedUnit: 'kg',
    totalProduced: 856,
    producedUnit: 'kg',
    utilizationRate: 62,
    qualityPassRate: 94,
    averageYield: 68,
    pendingQualityControl: 1,
    rejectedBatches: 0,
    activeProcessingLines: 2,
    totalProcessingLines: 4,
    linesUnderMaintenance: 1,
  };
};

// Production Data
export const getMockProcesamientoProduction = async (): Promise<ProcesamientoProductionData[]> => {
  await delay(300);
  return [
    { month: 'Ago', processed: 1200, produced: 780, yieldRate: 65 },
    { month: 'Sep', processed: 1450, produced: 1015, yieldRate: 70 },
    { month: 'Oct', processed: 1380, produced: 938, yieldRate: 68 },
    { month: 'Nov', processed: 1620, produced: 1134, yieldRate: 70 },
    { month: 'Dic', processed: 1100, produced: 715, yieldRate: 65 },
    { month: 'Ene', processed: 1850, produced: 1258, yieldRate: 68 },
  ];
};

// Production by Type
export const getMockProductionByType = async (): Promise<ProductionByType[]> => {
  await delay(300);
  return [
    { productType: 'Salsas', quantity: 420, unit: 'kg', percentage: 33, color: '#ef4444' },
    { productType: 'Lácteos', quantity: 280, unit: 'kg', percentage: 22, color: '#3b82f6' },
    { productType: 'Miel', quantity: 220, unit: 'kg', percentage: 17, color: '#f59e0b' },
    { productType: 'Encurtidos', quantity: 180, unit: 'kg', percentage: 14, color: '#10b981' },
    { productType: 'Otros', quantity: 156, unit: 'kg', percentage: 14, color: '#6b7280' },
  ];
};

// Tasks
export const getMockProcesamientoTasks = async (): Promise<ProcesamientoTask[]> => {
  await delay(300);
  return [
    {
      id: '1',
      title: 'Control de calidad - Miel',
      type: 'quality_control',
      batchCode: 'PROC-2026-003',
      dueDate: new Date('2026-01-21'),
      priority: 'high',
      status: 'pending',
      assignedTo: 'Dr. López',
    },
    {
      id: '2',
      title: 'Mantenimiento Línea Carnes',
      type: 'line_maintenance',
      lineCode: 'LINEA-004',
      dueDate: new Date('2026-01-25'),
      priority: 'high',
      status: 'in_progress',
      assignedTo: 'Técnico Ramírez',
    },
    {
      id: '3',
      title: 'Procesar lote de chile',
      type: 'batch_processing',
      batchCode: 'PROC-2026-004',
      dueDate: new Date('2026-01-22'),
      priority: 'medium',
      status: 'pending',
      assignedTo: 'Juan Pérez',
    },
    {
      id: '4',
      title: 'Calibración Línea Lácteos',
      type: 'equipment_calibration',
      lineCode: 'LINEA-002',
      dueDate: new Date('2026-01-23'),
      priority: 'medium',
      status: 'pending',
    },
    {
      id: '5',
      title: 'Planificación producción semanal',
      type: 'batch_processing',
      dueDate: new Date('2026-01-26'),
      priority: 'low',
      status: 'pending',
      assignedTo: 'María García',
    },
  ];
};

// Batch Summaries for list
export const getMockBatchSummaries = async (): Promise<BatchSummary[]> => {
  await delay(300);
  return [
    {
      id: '1',
      batchCode: 'PROC-2026-001',
      inputProductName: 'Tomate Roma',
      inputProductType: 'tomate',
      inputQuantity: 450,
      inputUnit: 'kg',
      outputProductName: 'Salsa de Tomate',
      status: 'in_progress',
      processingLineName: 'Línea Agrícola',
      startDate: new Date('2026-01-20T08:00:00'),
      expectedEndDate: new Date('2026-01-21T16:00:00'),
      progress: 65,
      operator: 'Juan Pérez',
    },
    {
      id: '3',
      batchCode: 'PROC-2026-003',
      inputProductName: 'Miel Pura',
      inputProductType: 'miel',
      inputQuantity: 80,
      inputUnit: 'kg',
      outputProductName: 'Miel Envasada',
      status: 'quality_control',
      processingLineName: 'Línea Apícola',
      startDate: new Date('2026-01-19T09:00:00'),
      expectedEndDate: new Date('2026-01-20T12:00:00'),
      progress: 100,
      operator: 'Ana López',
      qualityStatus: 'pending',
    },
    {
      id: '4',
      batchCode: 'PROC-2026-004',
      inputProductName: 'Chile Jalapeño',
      inputProductType: 'chile',
      inputQuantity: 120,
      inputUnit: 'kg',
      outputProductName: 'Salsa Picante',
      status: 'pending',
      processingLineName: 'Línea Agrícola',
      startDate: new Date('2026-01-22T08:00:00'),
      expectedEndDate: new Date('2026-01-22T18:00:00'),
      progress: 0,
    },
  ];
};
